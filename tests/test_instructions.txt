Golf Scorecard App — Test Instructions
=======================================

All commands should be run from the project root:
  /Users/tuckerbrewer/golf_scorecard_app/ScanScorecards

Activate the virtual environment first:
  source .venv/bin/activate


======================================================================
RUN ALL TESTS
======================================================================

Run every test suite at once (except LLM — requires live API key):

  pytest tests/test_models.py tests/test_database.py tests/test_analytics.py -v

To also include LLM tests (requires GOOGLE_API_KEY in .env):

  pytest tests/ -v


======================================================================
test_models.py  — Pydantic domain model tests
======================================================================

Run all:
  pytest tests/test_models.py -v

Run a single test by name:
  pytest tests/test_models.py::test_hole_validation -v
  pytest tests/test_models.py::test_tee_validation_and_calculations -v
  pytest tests/test_models.py::test_tee_empty_yardages -v
  pytest tests/test_models.py::test_course_par_calculations -v
  pytest tests/test_models.py::test_course_lookups -v
  pytest tests/test_models.py::test_hole_score_validation_and_logic -v
  pytest tests/test_models.py::test_hole_score_par_played_validation -v
  pytest tests/test_models.py::test_hole_score_to_par_no_par_data -v
  pytest tests/test_models.py::test_score_type_extremes -v
  pytest tests/test_models.py::test_round_property_aggregations -v
  pytest tests/test_models.py::test_round_nine_hole_calculations -v
  pytest tests/test_models.py::test_round_to_par_with_course -v
  pytest tests/test_models.py::test_round_to_par_without_course_fallback -v
  pytest tests/test_models.py::test_round_total_to_par_no_par_data -v
  pytest tests/test_models.py::test_round_score_to_par_no_par_data -v
  pytest tests/test_models.py::test_round_gets_correct_tee -v
  pytest tests/test_models.py::test_round_get_tee_returns_none_without_course -v
  pytest tests/test_models.py::test_round_get_hole_score_out_of_range -v
  pytest tests/test_models.py::test_round_course_name_played -v
  pytest tests/test_models.py::test_user_tee_validation -v

No external dependencies — runs offline.


======================================================================
test_database.py  — DB converters + repository unit tests (mocked)
======================================================================

Run all:
  pytest tests/test_database.py -v

Run a single test by name:
  pytest tests/test_database.py::test_hole_score_converter_maps_par_played -v
  pytest tests/test_database.py::test_hole_score_converter_null_par_played -v
  pytest tests/test_database.py::test_hole_score_to_row_includes_par_played -v
  pytest tests/test_database.py::test_hole_score_to_row_null_hole_id -v
  pytest tests/test_database.py::test_round_converter_maps_course_name_played -v
  pytest tests/test_database.py::test_round_converter_hole_scores_sorted -v
  pytest tests/test_database.py::test_user_tee_converter_roundtrip -v
  pytest tests/test_database.py::test_course_repo_get_course -v
  pytest tests/test_database.py::test_course_repo_get_course_not_found -v
  pytest tests/test_database.py::test_course_repo_create_course -v
  pytest tests/test_database.py::test_round_repo_get_round -v
  pytest tests/test_database.py::test_round_repo_get_round_not_found -v
  pytest tests/test_database.py::test_round_repo_create_round_no_course -v
  pytest tests/test_database.py::test_round_repo_create_round_populates_par_from_course -v
  pytest tests/test_database.py::test_user_tee_repo_get -v
  pytest tests/test_database.py::test_user_tee_repo_get_not_found -v
  pytest tests/test_database.py::test_user_tee_repo_create -v
  pytest tests/test_database.py::test_user_tee_repo_delete -v

No external dependencies — DB is fully mocked with AsyncMock.


======================================================================
test_analytics.py  — Analytics/stats function tests
======================================================================

Run all:
  pytest tests/test_analytics.py -v

Run a single test by name:
  pytest tests/test_analytics.py::test_round_summary -v
  pytest tests/test_analytics.py::test_putts_and_gir_per_round -v
  pytest tests/test_analytics.py::test_score_trend -v
  pytest tests/test_analytics.py::test_scoring_vs_hole_handicap -v

No external dependencies — runs offline.


======================================================================
test_llm.py  — LLM scorecard extraction accuracy tests
======================================================================

REQUIRES: GOOGLE_API_KEY set in .env and a live network connection.
These tests call the Gemini API and consume API quota.

Run all three:
  python -m unittest tests.test_llm -v

Run individually:
  python -m unittest tests.test_llm.TestScorecardExtraction.test_example_scorecard -v
  python -m unittest tests.test_llm.TestScorecardExtraction.test_scores_only_extraction -v
  python -m unittest tests.test_llm.TestScorecardExtraction.test_smart_with_null_repo -v

Note: test_llm uses unittest (not pytest) because it pre-dates the pytest migration.
      It can also be discovered by pytest but verbose output is better via unittest.


======================================================================
NOTES
======================================================================

- pytest.ini (or pyproject.toml) sets asyncio_mode = strict; async tests
  require @pytest.mark.asyncio.
- LLM tests are intentionally excluded from the default "run all" command
  above to avoid unintended API calls in CI or offline environments.
- To check just that imports resolve (no test logic):
    python -c "import tests.test_models; import tests.test_database; import tests.test_analytics"
